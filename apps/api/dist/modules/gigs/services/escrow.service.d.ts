import { PrismaService } from '../../prisma/prisma.service';
import { FundEscrowDto, ReleaseMilestoneDto } from '../dto/gig.dto';
interface CreateEscrowParams {
    gigId: string;
    applicationId: string;
    payerId: string;
    payeeId: string;
    amount: number;
    currency?: string;
}
export declare class EscrowService {
    private prisma;
    constructor(prisma: PrismaService);
    create(params: CreateEscrowParams): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        currency: string;
        status: import(".prisma/client").$Enums.GigEscrowStatus;
        amount: number;
        stripePaymentIntentId: string | null;
        gigId: string;
        applicationId: string;
        payerId: string;
        payeeId: string;
        stripeFundingMethod: string | null;
        fundedAt: Date | null;
        releasedAt: Date | null;
        refundedAt: Date | null;
    }>;
    fund(escrowId: string, payerId: string, fundEscrowDto: FundEscrowDto): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        currency: string;
        status: import(".prisma/client").$Enums.GigEscrowStatus;
        amount: number;
        stripePaymentIntentId: string | null;
        gigId: string;
        applicationId: string;
        payerId: string;
        payeeId: string;
        stripeFundingMethod: string | null;
        fundedAt: Date | null;
        releasedAt: Date | null;
        refundedAt: Date | null;
    }>;
    releaseMilestone(escrowId: string, payerId: string, releaseMilestoneDto: ReleaseMilestoneDto): Promise<{
        escrow: any;
        milestone: any;
    }>;
    refund(escrowId: string, _adminId: string, _reason: string): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        currency: string;
        status: import(".prisma/client").$Enums.GigEscrowStatus;
        amount: number;
        stripePaymentIntentId: string | null;
        gigId: string;
        applicationId: string;
        payerId: string;
        payeeId: string;
        stripeFundingMethod: string | null;
        fundedAt: Date | null;
        releasedAt: Date | null;
        refundedAt: Date | null;
    }>;
    markDisputed(escrowId: string): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        currency: string;
        status: import(".prisma/client").$Enums.GigEscrowStatus;
        amount: number;
        stripePaymentIntentId: string | null;
        gigId: string;
        applicationId: string;
        payerId: string;
        payeeId: string;
        stripeFundingMethod: string | null;
        fundedAt: Date | null;
        releasedAt: Date | null;
        refundedAt: Date | null;
    }>;
    findOne(id: string): Promise<{
        gig: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            deletedAt: Date | null;
            skills: string[];
            currency: string;
            expiresAt: Date | null;
            description: string;
            title: string;
            status: import(".prisma/client").$Enums.GigStatus;
            category: import(".prisma/client").$Enums.GigCategory;
            budgetType: import(".prisma/client").$Enums.GigBudgetType;
            budgetMin: number;
            budgetMax: number;
            experienceLevel: import(".prisma/client").$Enums.GigExperienceLevel;
            estimatedDuration: number;
            deliverables: string[];
            attachments: string[];
            applicationsCount: number;
            viewsCount: number;
            creatorId: string;
        };
        application: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            status: import(".prisma/client").$Enums.GigApplicationStatus;
            gigId: string;
            coverLetter: string;
            proposedBudget: number;
            proposedTimeline: number;
            portfolioLinks: string[];
            relevantExperience: string;
            applicantId: string;
            milestoneProposals: import("@prisma/client/runtime/library").JsonValue | null;
        };
        payer: {
            email: string;
            username: string;
            fullName: string | null;
            id: string;
            passwordHash: string | null;
            googleId: string | null;
            stripeCustomerId: string | null;
            role: import(".prisma/client").$Enums.UserRole;
            isVerified: boolean;
            suspended: boolean;
            suspendedUntil: Date | null;
            lastLoginAt: Date | null;
            createdAt: Date;
            updatedAt: Date;
            deletedAt: Date | null;
        };
        payee: {
            email: string;
            username: string;
            fullName: string | null;
            id: string;
            passwordHash: string | null;
            googleId: string | null;
            stripeCustomerId: string | null;
            role: import(".prisma/client").$Enums.UserRole;
            isVerified: boolean;
            suspended: boolean;
            suspendedUntil: Date | null;
            lastLoginAt: Date | null;
            createdAt: Date;
            updatedAt: Date;
            deletedAt: Date | null;
        };
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        currency: string;
        status: import(".prisma/client").$Enums.GigEscrowStatus;
        amount: number;
        stripePaymentIntentId: string | null;
        gigId: string;
        applicationId: string;
        payerId: string;
        payeeId: string;
        stripeFundingMethod: string | null;
        fundedAt: Date | null;
        releasedAt: Date | null;
        refundedAt: Date | null;
    }>;
    findByApplication(applicationId: string): Promise<{
        gig: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            deletedAt: Date | null;
            skills: string[];
            currency: string;
            expiresAt: Date | null;
            description: string;
            title: string;
            status: import(".prisma/client").$Enums.GigStatus;
            category: import(".prisma/client").$Enums.GigCategory;
            budgetType: import(".prisma/client").$Enums.GigBudgetType;
            budgetMin: number;
            budgetMax: number;
            experienceLevel: import(".prisma/client").$Enums.GigExperienceLevel;
            estimatedDuration: number;
            deliverables: string[];
            attachments: string[];
            applicationsCount: number;
            viewsCount: number;
            creatorId: string;
        };
        application: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            status: import(".prisma/client").$Enums.GigApplicationStatus;
            gigId: string;
            coverLetter: string;
            proposedBudget: number;
            proposedTimeline: number;
            portfolioLinks: string[];
            relevantExperience: string;
            applicantId: string;
            milestoneProposals: import("@prisma/client/runtime/library").JsonValue | null;
        };
        payer: {
            email: string;
            username: string;
            fullName: string | null;
            id: string;
            passwordHash: string | null;
            googleId: string | null;
            stripeCustomerId: string | null;
            role: import(".prisma/client").$Enums.UserRole;
            isVerified: boolean;
            suspended: boolean;
            suspendedUntil: Date | null;
            lastLoginAt: Date | null;
            createdAt: Date;
            updatedAt: Date;
            deletedAt: Date | null;
        };
        payee: {
            email: string;
            username: string;
            fullName: string | null;
            id: string;
            passwordHash: string | null;
            googleId: string | null;
            stripeCustomerId: string | null;
            role: import(".prisma/client").$Enums.UserRole;
            isVerified: boolean;
            suspended: boolean;
            suspendedUntil: Date | null;
            lastLoginAt: Date | null;
            createdAt: Date;
            updatedAt: Date;
            deletedAt: Date | null;
        };
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        currency: string;
        status: import(".prisma/client").$Enums.GigEscrowStatus;
        amount: number;
        stripePaymentIntentId: string | null;
        gigId: string;
        applicationId: string;
        payerId: string;
        payeeId: string;
        stripeFundingMethod: string | null;
        fundedAt: Date | null;
        releasedAt: Date | null;
        refundedAt: Date | null;
    }>;
    getMilestones(applicationId: string): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        description: string;
        title: string;
        status: import(".prisma/client").$Enums.GigMilestoneStatus;
        amount: number;
        rejectedAt: Date | null;
        approvedAt: Date | null;
        gigId: string;
        dueDate: Date;
        order: number;
        feedback: string | null;
        applicationId: string;
        submittedAt: Date | null;
    }[]>;
    submitMilestone(milestoneId: string, freelancerId: string): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        description: string;
        title: string;
        status: import(".prisma/client").$Enums.GigMilestoneStatus;
        amount: number;
        rejectedAt: Date | null;
        approvedAt: Date | null;
        gigId: string;
        dueDate: Date;
        order: number;
        feedback: string | null;
        applicationId: string;
        submittedAt: Date | null;
    }>;
    approveMilestone(milestoneId: string, clientId: string, feedback?: string): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        description: string;
        title: string;
        status: import(".prisma/client").$Enums.GigMilestoneStatus;
        amount: number;
        rejectedAt: Date | null;
        approvedAt: Date | null;
        gigId: string;
        dueDate: Date;
        order: number;
        feedback: string | null;
        applicationId: string;
        submittedAt: Date | null;
    }>;
    rejectMilestone(milestoneId: string, clientId: string, feedback: string): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        description: string;
        title: string;
        status: import(".prisma/client").$Enums.GigMilestoneStatus;
        amount: number;
        rejectedAt: Date | null;
        approvedAt: Date | null;
        gigId: string;
        dueDate: Date;
        order: number;
        feedback: string | null;
        applicationId: string;
        submittedAt: Date | null;
    }>;
    getReleasedAmount(escrowId: string): Promise<number>;
}
export {};
