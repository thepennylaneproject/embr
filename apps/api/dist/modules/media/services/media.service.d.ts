import { PrismaService } from '../../prisma/prisma.service';
import { CreateMediaRecordDto, UpdateMediaMuxDataDto } from '../dto/media-upload.dto';
export declare class MediaService {
    private prisma;
    private readonly logger;
    constructor(prisma: PrismaService);
    createMediaRecord(dto: CreateMediaRecordDto): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        deletedAt: Date | null;
        userId: string;
        thumbnailUrl: string | null;
        muxAssetId: string | null;
        muxPlaybackId: string | null;
        duration: number | null;
        postId: string | null;
        fileKey: string;
        uploadId: string | null;
        fileUrl: string;
        contentType: string;
        status: string;
        aspectRatio: string | null;
        playbackUrl: string | null;
        thumbnailKey: string | null;
        fileName: string;
        fileType: string;
        fileSize: number;
        errorMessage: string | null;
        completedAt: Date | null;
    }>;
    getMediaById(mediaId: string): Promise<{
        user: {
            profile: {
                displayName: string;
                avatarUrl: string;
            };
            username: string;
            id: string;
        };
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        deletedAt: Date | null;
        userId: string;
        thumbnailUrl: string | null;
        muxAssetId: string | null;
        muxPlaybackId: string | null;
        duration: number | null;
        postId: string | null;
        fileKey: string;
        uploadId: string | null;
        fileUrl: string;
        contentType: string;
        status: string;
        aspectRatio: string | null;
        playbackUrl: string | null;
        thumbnailKey: string | null;
        fileName: string;
        fileType: string;
        fileSize: number;
        errorMessage: string | null;
        completedAt: Date | null;
    }>;
    getMediaByUploadId(uploadId: string): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        deletedAt: Date | null;
        userId: string;
        thumbnailUrl: string | null;
        muxAssetId: string | null;
        muxPlaybackId: string | null;
        duration: number | null;
        postId: string | null;
        fileKey: string;
        uploadId: string | null;
        fileUrl: string;
        contentType: string;
        status: string;
        aspectRatio: string | null;
        playbackUrl: string | null;
        thumbnailKey: string | null;
        fileName: string;
        fileType: string;
        fileSize: number;
        errorMessage: string | null;
        completedAt: Date | null;
    }>;
    getMediaByMuxAssetId(assetId: string): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        deletedAt: Date | null;
        userId: string;
        thumbnailUrl: string | null;
        muxAssetId: string | null;
        muxPlaybackId: string | null;
        duration: number | null;
        postId: string | null;
        fileKey: string;
        uploadId: string | null;
        fileUrl: string;
        contentType: string;
        status: string;
        aspectRatio: string | null;
        playbackUrl: string | null;
        thumbnailKey: string | null;
        fileName: string;
        fileType: string;
        fileSize: number;
        errorMessage: string | null;
        completedAt: Date | null;
    }>;
    getMediaByFileKey(fileKey: string): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        deletedAt: Date | null;
        userId: string;
        thumbnailUrl: string | null;
        muxAssetId: string | null;
        muxPlaybackId: string | null;
        duration: number | null;
        postId: string | null;
        fileKey: string;
        uploadId: string | null;
        fileUrl: string;
        contentType: string;
        status: string;
        aspectRatio: string | null;
        playbackUrl: string | null;
        thumbnailKey: string | null;
        fileName: string;
        fileType: string;
        fileSize: number;
        errorMessage: string | null;
        completedAt: Date | null;
    }>;
    getUserMedia(userId: string, options?: {
        contentType?: string;
        status?: string;
        limit?: number;
        offset?: number;
    }): Promise<{
        media: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            deletedAt: Date | null;
            userId: string;
            thumbnailUrl: string | null;
            muxAssetId: string | null;
            muxPlaybackId: string | null;
            duration: number | null;
            postId: string | null;
            fileKey: string;
            uploadId: string | null;
            fileUrl: string;
            contentType: string;
            status: string;
            aspectRatio: string | null;
            playbackUrl: string | null;
            thumbnailKey: string | null;
            fileName: string;
            fileType: string;
            fileSize: number;
            errorMessage: string | null;
            completedAt: Date | null;
        }[];
        total: number;
        limit: number;
        offset: number;
        hasMore: boolean;
    }>;
    updateMediaStatus(mediaId: string, status: string, metadata?: {
        errorMessage?: string;
        completedAt?: Date;
    }): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        deletedAt: Date | null;
        userId: string;
        thumbnailUrl: string | null;
        muxAssetId: string | null;
        muxPlaybackId: string | null;
        duration: number | null;
        postId: string | null;
        fileKey: string;
        uploadId: string | null;
        fileUrl: string;
        contentType: string;
        status: string;
        aspectRatio: string | null;
        playbackUrl: string | null;
        thumbnailKey: string | null;
        fileName: string;
        fileType: string;
        fileSize: number;
        errorMessage: string | null;
        completedAt: Date | null;
    }>;
    updateMediaWithMuxData(mediaId: string, dto: UpdateMediaMuxDataDto): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        deletedAt: Date | null;
        userId: string;
        thumbnailUrl: string | null;
        muxAssetId: string | null;
        muxPlaybackId: string | null;
        duration: number | null;
        postId: string | null;
        fileKey: string;
        uploadId: string | null;
        fileUrl: string;
        contentType: string;
        status: string;
        aspectRatio: string | null;
        playbackUrl: string | null;
        thumbnailKey: string | null;
        fileName: string;
        fileType: string;
        fileSize: number;
        errorMessage: string | null;
        completedAt: Date | null;
    }>;
    updateMedia(mediaId: string, data: any): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        deletedAt: Date | null;
        userId: string;
        thumbnailUrl: string | null;
        muxAssetId: string | null;
        muxPlaybackId: string | null;
        duration: number | null;
        postId: string | null;
        fileKey: string;
        uploadId: string | null;
        fileUrl: string;
        contentType: string;
        status: string;
        aspectRatio: string | null;
        playbackUrl: string | null;
        thumbnailKey: string | null;
        fileName: string;
        fileType: string;
        fileSize: number;
        errorMessage: string | null;
        completedAt: Date | null;
    }>;
    deleteMedia(mediaId: string): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        deletedAt: Date | null;
        userId: string;
        thumbnailUrl: string | null;
        muxAssetId: string | null;
        muxPlaybackId: string | null;
        duration: number | null;
        postId: string | null;
        fileKey: string;
        uploadId: string | null;
        fileUrl: string;
        contentType: string;
        status: string;
        aspectRatio: string | null;
        playbackUrl: string | null;
        thumbnailKey: string | null;
        fileName: string;
        fileType: string;
        fileSize: number;
        errorMessage: string | null;
        completedAt: Date | null;
    }>;
    hardDeleteMedia(mediaId: string): Promise<void>;
    checkMediaAccess(userId: string, mediaId: string): Promise<boolean>;
    getMediaStats(userId: string): Promise<{
        totalFiles: number;
        totalSize: number;
        byType: {
            type: string;
            count: number;
        }[];
        byStatus: {
            status: string;
            count: number;
        }[];
    }>;
    cleanupDeletedMedia(daysOld?: number): Promise<{
        id: string;
        muxAssetId: string;
        fileKey: string;
        thumbnailKey: string;
    }[]>;
    getFailedUploads(userId: string, limit?: number): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        deletedAt: Date | null;
        userId: string;
        thumbnailUrl: string | null;
        muxAssetId: string | null;
        muxPlaybackId: string | null;
        duration: number | null;
        postId: string | null;
        fileKey: string;
        uploadId: string | null;
        fileUrl: string;
        contentType: string;
        status: string;
        aspectRatio: string | null;
        playbackUrl: string | null;
        thumbnailKey: string | null;
        fileName: string;
        fileType: string;
        fileSize: number;
        errorMessage: string | null;
        completedAt: Date | null;
    }[]>;
}
