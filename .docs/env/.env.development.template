# Embr Platform - Development Environment Variables
# Copy this file to .env in your project root and fill in the values

# ==============================================
# APPLICATION
# ==============================================
NODE_ENV=development
PORT=3003
API_URL=http://localhost:3003
WEB_URL=http://localhost:3004
MOBILE_URL=http://localhost:8081

# ==============================================
# DATABASE
# ==============================================
# PostgreSQL connection string
DATABASE_URL="postgresql://embr:embr_dev_password@localhost:5432/embr?schema=public"
# Direct connection for migrations (bypasses connection pooling)
DIRECT_URL="postgresql://embr:embr_dev_password@localhost:5432/embr?schema=public"

# ==============================================
# REDIS
# ==============================================
REDIS_HOST=localhost
REDIS_PORT=6380
REDIS_PASSWORD=embr_redis_password
REDIS_URL=redis://:embr_redis_password@localhost:6380

# ==============================================
# AUTHENTICATION
# ==============================================
# JWT Configuration
JWT_SECRET=your_super_secret_jwt_key_min_32_chars_please_change_this
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your_super_secret_refresh_key_min_32_chars_please_change_this
JWT_REFRESH_EXPIRES_IN=30d

# Google OAuth
GOOGLE_CLIENT_ID=your_google_client_id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_CALLBACK_URL=http://localhost:3003/v1/auth/google/callback

# ==============================================
# AWS SERVICES
# ==============================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key

# S3 Storage
AWS_S3_BUCKET=embr-dev-uploads
AWS_S3_URL=https://embr-dev-uploads.s3.amazonaws.com

# For local development, use LocalStack (optional)
# AWS_ENDPOINT=http://localhost:4566
# USE_LOCALSTACK=true

# ==============================================
# VIDEO PROCESSING (MUX)
# ==============================================
MUX_TOKEN_ID=your_mux_token_id
MUX_TOKEN_SECRET=your_mux_token_secret
MUX_WEBHOOK_SECRET=your_mux_webhook_signing_secret

# ==============================================
# PAYMENTS (STRIPE)
# ==============================================
STRIPE_SECRET_KEY=sk_test_your_stripe_test_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_test_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_stripe_webhook_secret

# Platform fee percentage (e.g., 10 for 10%)
PLATFORM_FEE_PERCENTAGE=10

# ==============================================
# JOBS API (RELEVNT)
# ==============================================
RELEVNT_API_KEY=your_relevnt_api_key
RELEVNT_API_URL=https://api.relevnt.com/v1

# ==============================================
# EMAIL (Development uses MailHog)
# ==============================================
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_SECURE=false
SMTP_USER=
SMTP_PASSWORD=
EMAIL_FROM=noreply@embr.local

# ==============================================
# FRONTEND URLS (for CORS)
# ==============================================
ALLOWED_ORIGINS=http://localhost:3004,http://localhost:8081

# ==============================================
# ANALYTICS & MONITORING (Optional)
# ==============================================
# Sentry DSN for error tracking
SENTRY_DSN=

# Google Analytics
NEXT_PUBLIC_GA_ID=

# ==============================================
# RATE LIMITING
# ==============================================
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# ==============================================
# FILE UPLOAD LIMITS
# ==============================================
MAX_FILE_SIZE=104857600 # 100MB in bytes
MAX_VIDEO_DURATION=180 # 3 minutes in seconds
ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/gif,image/webp
ALLOWED_VIDEO_TYPES=video/mp4,video/quicktime,video/x-msvideo

# ==============================================
# BULL QUEUE (Background Jobs)
# ==============================================
QUEUE_NAME=embr_jobs
QUEUE_PREFIX=embr

# ==============================================
# LOGGING
# ==============================================
LOG_LEVEL=debug
LOG_FORMAT=pretty

# ==============================================
# TESTING
# ==============================================
TEST_DATABASE_URL="postgresql://embr:embr_dev_password@localhost:5432/embr_test?schema=public"

# ==============================================
# DEVELOPMENT TOOLS
# ==============================================
# Enable Swagger documentation
ENABLE_SWAGGER=true
SWAGGER_PATH=/docs

# Enable request logging
ENABLE_REQUEST_LOGGING=true

# Enable detailed error messages
ENABLE_DETAILED_ERRORS=true

# ==============================================
# NOTES
# ==============================================
# 1. Never commit this file with real credentials
# 2. Update values before starting development
# 3. Use strong, unique secrets for JWT tokens
# 4. For Google OAuth, create credentials at: https://console.cloud.google.com
# 5. For Stripe, get test keys from: https://dashboard.stripe.com/test/apikeys
# 6. For Mux, create account at: https://dashboard.mux.com
# 7. LocalStack can emulate AWS services locally (optional)
# 8. MailHog catches all emails sent during development
