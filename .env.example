# Embr Platform - Environment Variables Template
# Copy this file to .env and fill in your values

# ==============================================
# APPLICATION
# ==============================================
NODE_ENV=development
PORT=3003
API_URL=http://localhost:3003
WEB_URL=http://localhost:3004
MOBILE_URL=http://localhost:8081

# ==============================================
# DATABASE
# ==============================================
# PostgreSQL connection string (with connection pooling)
DATABASE_URL="postgresql://user:password@host:5432/database?schema=public"
# Direct connection for migrations (bypasses connection pooling)
DIRECT_URL="postgresql://user:password@host:5432/database?schema=public"

# ==============================================
# REDIS
# ==============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_URL=redis://:your_redis_password@localhost:6379

# ==============================================
# AUTHENTICATION
# ==============================================
# JWT Configuration - generate strong secrets!
# Use: openssl rand -hex 32
JWT_SECRET=generate_a_strong_secret_here
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=generate_another_strong_secret_here
JWT_REFRESH_EXPIRES_IN=30d

# Google OAuth (https://console.cloud.google.com/apis/credentials)
GOOGLE_CLIENT_ID=your_google_client_id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_CALLBACK_URL=http://localhost:3003/v1/auth/google/callback

# ==============================================
# AWS SERVICES
# ==============================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key

# S3 Storage
AWS_S3_BUCKET=your-bucket-name
AWS_S3_URL=https://your-bucket-name.s3.amazonaws.com

# For local development, use LocalStack (optional)
# AWS_ENDPOINT=http://localhost:4566
# USE_LOCALSTACK=true

# ==============================================
# VIDEO PROCESSING (MUX)
# ==============================================
# Get credentials at https://dashboard.mux.com
MUX_TOKEN_ID=your_mux_token_id
MUX_TOKEN_SECRET=your_mux_token_secret
MUX_WEBHOOK_SECRET=your_mux_webhook_secret

# ==============================================
# PAYMENTS (STRIPE)
# ==============================================
# Get keys at https://dashboard.stripe.com/test/apikeys
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Platform fee percentage (e.g., 10 for 10%)
PLATFORM_FEE_PERCENTAGE=10

# ==============================================
# JOBS API (RELEVNT)
# ==============================================
RELEVNT_API_KEY=your_relevnt_api_key
RELEVNT_API_URL=https://api.relevnt.com/v1

# ==============================================
# EMAIL 
# ==============================================
# Development: use MailHog (localhost:1025)
# Production: use your SMTP provider
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_SECURE=false
SMTP_USER=
SMTP_PASSWORD=
EMAIL_FROM=noreply@embr.local

# ==============================================
# FRONTEND URLS (for CORS)
# ==============================================
ALLOWED_ORIGINS=http://localhost:3004,http://localhost:8081

# ==============================================
# ANALYTICS & MONITORING (Optional)
# ==============================================
SENTRY_DSN=
NEXT_PUBLIC_GA_ID=

# ==============================================
# RATE LIMITING
# ==============================================
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# ==============================================
# FILE UPLOAD LIMITS
# ==============================================
MAX_FILE_SIZE=104857600
MAX_VIDEO_DURATION=180
ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/gif,image/webp
ALLOWED_VIDEO_TYPES=video/mp4,video/quicktime,video/x-msvideo

# ==============================================
# BULL QUEUE (Background Jobs)
# ==============================================
QUEUE_NAME=embr_jobs
QUEUE_PREFIX=embr

# ==============================================
# LOGGING
# ==============================================
LOG_LEVEL=debug
LOG_FORMAT=pretty

# ==============================================
# TESTING
# ==============================================
TEST_DATABASE_URL="postgresql://user:password@localhost:5433/embr_test?schema=public"

# ==============================================
# DEVELOPMENT TOOLS
# ==============================================
ENABLE_SWAGGER=true
SWAGGER_PATH=/docs
ENABLE_REQUEST_LOGGING=true
ENABLE_DETAILED_ERRORS=true
